{% extends 'base.html' %}
{% block title %}Private Mode{% endblock %}

{% block content %}
<div class="card">
  <h2 class="page-title">üïµÔ∏è‚Äç‚ôÇÔ∏è Toggle Private Mode</h2>

  <div class="form-group full-width">
    <button id="togglePrivate" class="btn-primary">Toggle Private Mode</button>
    <p id="privateStatus" class="alert" style="margin-top: 1rem;"></p>
  </div>

  <div class="form-group full-width">
    <a href="{% url 'dashboard' %}" class="text-link">‚Üê Back to Dashboard</a>
  </div>
</div>

<script>
document.getElementById("togglePrivate").onclick = async () => {
  const res = await fetch("/private-mode/", {
    method: "POST",
    headers: {
      "X-CSRFToken": "{{ csrf_token }}",
      "Accept": "application/json"
    }
  });
  const json = await res.json();
  const statusText = json.private_mode ? "Private Mode Enabled ‚úÖ" : "Private Mode Disabled ‚ùå";
  const statusClass = json.private_mode ? "alert success" : "alert error";

  const statusEl = document.getElementById("privateStatus");
  statusEl.innerText = statusText;
  statusEl.className = statusClass;
};
</script>
{% endblock %}

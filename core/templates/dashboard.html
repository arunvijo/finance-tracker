{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard">
  <h1 class="page-title">Welcome, {{ request.user.username }} ðŸ‘‹</h1>

  <div class="dashboard-grid">

    <!-- Recent Transactions -->
    <section class="card dashboard-section">
      <h2 class="section-title">
        <a href="{% url 'transactions_page' %}">
          <i class="fas fa-receipt"></i> Recent Transactions
        </a>
      </h2>
      {% if recent_transactions %}
        <ul class="simple-list">
          {% for tx in recent_transactions %}
            <li><i class="fas fa-calendar-alt"></i> {{ tx.date_time|date:"d M Y" }} â€” â‚¹{{ tx.amount }} ({{ tx.category }})</li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="empty">No recent transactions.</p>
      {% endif %}
    </section>

    <!-- Budgets -->
    <section class="card dashboard-section">
      <h2 class="section-title">
        <a href="{% url 'budgets_page' %}">
          <i class="fas fa-wallet"></i> This Month's Budgets
        </a>
      </h2>
      {% if recent_budgets %}
        <ul class="simple-list">
          {% for budget in recent_budgets %}
            <li><i class="fas fa-tag"></i> {{ budget.category }} â€” â‚¹{{ budget.amount }}</li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="empty">No budgets set.</p>
      {% endif %}
    </section>

    <!-- Goals -->
    <section class="card dashboard-section">
      <h2 class="section-title">
        <a href="{% url 'goals_page' %}">
          <i class="fas fa-bullseye"></i> Goals
        </a>
      </h2>
      {% if goals %}
        <ul class="simple-list">
          {% for goal in goals %}
            <li><i class="fas fa-flag-checkered"></i> {{ goal.title }} â€” â‚¹{{ goal.current_amount }}/â‚¹{{ goal.target_amount }}</li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="empty">No active goals.</p>
      {% endif %}
    </section>

    <!-- Quick Actions -->
    <section class="card dashboard-section">
      <h2 class="section-title"><i class="fas fa-bolt"></i> Quick Actions</h2>
      <div class="quick-links">
        <a href="{% url 'upi_page' %}" class="button"><i class="fas fa-paper-plane"></i> Generate UPI Link</a>
      </div>
    </section>

  </div>
</div>
{% endblock %}
